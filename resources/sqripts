
CREATE DATABASE skooter;
use skooter;
CREATE TABLE USER
(
    USER_ID INT(10) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    NAME VARCHAR(20),
    LOGIN VARCHAR(20) NOT NULL,
    PASSWORD VARCHAR(25) NOT NULL,
    BIRTHDAY DATE,
    STATUS CHAR(10) DEFAULT 'ACTIVE' NOT NULL
);
CREATE UNIQUE INDEX USER_LOGIN_uindex ON USER (LOGIN);

CREATE TABLE SCOOTER
(
    SCOOTER_ID INT(7) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    NAME VARCHAR(20),
    MODEL VARCHAR(15),
    PRICE DEC NOT NULL
);

CREATE TABLE `ORDER`
(
    ORDER_ID INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    `DATE` DATETIME NOT NULL,
    USER_ID INT(10) NOT NULL,
    SCOOTER_ID INT(11) NOT NULL,
    QUANTITY INT(5) DEFAULT 1 NOT NULL,
    STATUS CHAR(10) DEFAULT 'NEW' NOT NULL
);

ALTER TABLE skooter.`ORDER`
ADD CONSTRAINT user_fk
FOREIGN KEY (USER_ID) REFERENCES USER (id);

CREATE TABLE skooter.ORDER_SCOOTER
(
    ORDER_ID INT(11) NOT NULL,
    SCOOTER_ID INT(7) NOT NULL,
    CONSTRAINT ORDER_SCOOTER_pk PRIMARY KEY (ORDER_ID, SCOOTER_ID),
    CONSTRAINT ORDER_fk FOREIGN KEY (ORDER_ID) REFERENCES `ORDER` (id),
    CONSTRAINT SCOOTER_fk FOREIGN KEY (SCOOTER_ID) REFERENCES SCOOTER (id)
);

INSERT INTO SCOTER (NAME , MODEL, PRICE) VALUES
    ('Scooter', 'electric', 3000.0),
   ('Scooter1', 'electric1', 4000.0),
    ('Scooter2', 'electric2', 5000.0),
   ('Scooter3', 'electric3', 6000.0),

CREATE PROCEDURE getSkooterPrice(IN scooterId INT, OUT scooterPrice DECIMAL(10))
    BEGIN
        SELECT PRICE
        INTO scooterPrice
        FROM SCOOTER
        WHERE SCOOTER_ID = scooterId;
    END